<?xml version="1.0" encoding="UTF-8" ?>
<uamapping>
	<config rootFolder="llrfCtrl_hzdr" description="Test application for the digital LLRF system at ELBE / HZDR">
		<server applicationName="LLRFServer" port="16660" />
		<login username="test" password="test123" />
		<process_variable_hierarchy>
			<unroll pathSep="/">True</unroll>
		</process_variable_hierarchy>
		<mapping_exceptions>False</mapping_exceptions>
	</config>

    <!-- create folder -->
	<folder>
		<destination>A/B</destination>
		<name>C</name>
		<description>Folder description</description>
	</folder>
	<!-- update folder description of created folder 'B' -->
	<folder>
		<destination>A</destination>
		<name>B</name>
		<description>Description of B</description>
	</folder>
	<!-- update folder description of created folder 'A' -->
	<folder>
		<name>A</name>
		<description>Description of A</description>
	</folder>

	<!-- hierarchical map of complete structure (copy=false)-->
	<folder sourceName="Mein" copy="false">
		<destination>A/B</destination>
	</folder>

	<!-- hierarchical map of complete structure (copy=true)-->
	<folder sourceName="Dein" copy="true">
		<destination>A</destination>
	</folder>

    <!-- Error, copy with false 'option', names not equal -->
    <process_variable sourceName="Dein/Name/ist/uint8Array_s10" copy="false">
        <destination>folderB/folderC</destination>
        <name>varA</name>
        <unit>K</unit>
        <description>newA</description>
    </process_variable>

    <!-- ref in new folder -->
    <process_variable sourceName="Dein/Name/ist/uint8Array_s10" copy="false">
        <destination>folderB/folderC</destination>
        <name>uint8Array_s10</name>
        <unit>K</unit>
        <description>newA</description>
    </process_variable>

    <!-- ref in existing folder -->
	<process_variable sourceName="Dein/Name/ist/uint8Array_s10" copy="false">
		<destination>A/B</destination>
		<name>uint8Array_s10</name>
		<unit>K</unit>
		<description>newA</description>
	</process_variable>

	<!-- update existing pv -->
	<process_variable sourceName="A/B/uint8Array_s10" copy="false">
		<destination>A/B</destination>
		<name>uint8Array_s10</name>
		<unit>F</unit>
		<description>update description</description>
	</process_variable>

	<!-- minimal process var test  TODO adjust, currently is the destination needed
	<process_variable sourceName="A/B/uint8Array_s10" copy="true">
		<name>varB</name>
	</process_variable>
	-->

	<process_variable sourceName="Dein/Name/ist/uint8Array_s10" copy="true">
		<destination>folderB</destination>
		<name>varA</name>
		<unit>K</unit>
		<description>newA</description>
	</process_variable>

<!-- (1) Process variable options
  Information:
	- the path seperator for the destination tag is "/"
	- the destination can include a folder hierachy that is created on the flight
	- the given name is used without any modifications, e.g. myVars/myVar will result in a
	  variable with the name myVars/myVar and no folder myVars is created

  Error cases:
   1. no sourceName attribute
   2. sourceName attribute with no corresponding PV
   3. source and new PV are the same and copy="True" (see below)
   4. sourceName of the PV and new name are different and copy="False"

  Default cases:
   1. Copy attribute -> copy="False"
   2. Description -> description from source PV
   3. Unit -> unit from source PV
   4. Name -> Use pv name from sourceName attribute (here: varA)
   5. Destination -> pv is created in root directory
-->
	<!-- D1 [x]-->
	<process_variable sourceName="testDoubleArray_10000">
		<destination>A</destination>
		<name>testDoubleArray_10000</name>
		<description>Test Desc D1</description>
		<unit>U1</unit>
	</process_variable>
	<process_variable sourceName="testDoubleArray_11000">
		<destination>B</destination>
		<name>testDoubleArray_11000</name>
		<description>Test Desc D1.1</description>
		<unit>U1.1</unit>
	</process_variable>
    <!-- D2 [x]-->
    <process_variable sourceName="testDoubleArray_12000" copy="false">
        <destination>D</destination>
        <name>testDoubleArray_12000</name>
        <unit>U2</unit>
    </process_variable>
    <process_variable sourceName="testDoubleArray_13000" copy="false">
        <destination>E</destination>
        <name>testDoubleArray_13000</name>
        <description></description>
        <unit>U2.1</unit>
    </process_variable>
	<!-- D3 [x]-->
	<process_variable sourceName="testDoubleArray_14000" copy="false">
		<destination>F</destination>
		<name>testDoubleArray_14000</name>
		<description>update description</description>
	</process_variable>
	<process_variable sourceName="testDoubleArray_15000" copy="false">
		<destination>G</destination>
		<name>testDoubleArray_15000</name>
		<description>update description</description>
		<unit></unit>
	</process_variable>
	<!-- D4 [x]-->
	<process_variable sourceName="testDoubleArray_16000" copy="false">
		<destination>A/B</destination>
		<description>update description</description>
		<unit>new U</unit>
	</process_variable>
	<process_variable sourceName="testDoubleArray_17000" copy="false">
		<destination>A/Dein</destination>
		<description>update description</description>
		<unit>new U</unit>
	</process_variable>
	<!-- D5 [x]-->
	<process_variable sourceName="testDoubleArray_18000" copy="false">
		<name>testDoubleArray_18000</name>
		<description>update description</description>
		<unit>new U</unit>
	</process_variable>
	<process_variable sourceName="testDoubleArray_19000" copy="false">
		<name>testDoubleArray_19000</name>
		<destination></destination>
		<description>update description</description>
		<unit>new U</unit>
	</process_variable>
	<process_variable sourceName="testDoubleArray_18000" copy="true">
		<name>testDoubleArray_18000_</name>
		<description>update description</description>
		<unit>new U</unit>
	</process_variable>
	<process_variable sourceName="testDoubleArray_19000" copy="true">
		<name>testDoubleArray_19000_</name>
		<destination></destination>
		<description>update description</description>
		<unit>new U</unit>
	</process_variable>
	<!-- D6 [x]-->
	<process_variable sourceName="testDoubleArray_20000" copy="">
	</process_variable>
	<process_variable sourceName="testDoubleArray_21000" copy="">
		<name></name>
		<destination></destination>
		<description></description>
		<unit></unit>
	</process_variable>
	<process_variable sourceName="testDoubleArray_21000" copy="true">
		<name></name>
		<destination></destination>
		<description></description>
		<unit></unit>
	</process_variable>

<!-- (2) Additional variable options
    Information:
    - the path seperator for the destination tag is "/"
    - the destination can include a folder hierachy that is created on the fligth
    - variable type is ctkAdditionalVariable (UAString)
    - value should be assigned directly to the additional variable (no subnode named value)

    Error cases:
        E1. PV with same name exists
        E2. name is missing or is empty

    Default cases:
        D1. Description -> description empty
        D2. Destination -> variable is created in the root folder
        D3. Value -> empty string
    -->

	<!-- D1 [x]-->
	<additional_variable>
		<name>av_d1</name>
		<destination>A</destination>
		<value>av_value</value>
	</additional_variable>
	<additional_variable>
		<name>av_d1_1</name>
		<destination>A</destination>
		<description></description>
		<value>av_value</value>
	</additional_variable>
	<!-- D2 [x]-->
	<additional_variable>
		<name>av_d2</name>
		<value>av_value</value>
	</additional_variable>
	<additional_variable>
		<name>av_d2_1</name>
		<destination></destination>
		<value>av_value</value>
	</additional_variable>
	<!-- D3 [x]-->
	<additional_variable>
		<name>av_d3</name>
		<destination>A</destination>
	</additional_variable>
	<additional_variable>
		<name>av_d3_1</name>
		<destination>A</destination>
		<value></value>
	</additional_variable>
	<!-- D1, D2, D3 [x]-->
	<additional_variable>
		<name>av_d4</name>
	</additional_variable>
	<additional_variable>
		<name>av_d4_1</name>
		<destination></destination>
		<description></description>
		<value></value>
	</additional_variable>

	<!-- E1 [x]-->
	<additional_variable>
		<name>av_d4</name>
	</additional_variable>
	<!-- E2 [x]-->
	<additional_variable>
		<destination>A</destination>
		<value>av_value</value>
	</additional_variable>
	<!-- E2.1 [x]-->
	<additional_variable>
		<name></name>
		<destination>A</destination>
		<value>av_value</value>
	</additional_variable>

	<!-- general additional variable test -->
	<additional_variable>
		<destination>A/B</destination>
		<name>test</name>
		<description>New information of AV</description>
		<value>1</value>
	</additional_variable>

<!-- (3) Folder without source
 	Information:
   - the path seperator for the destination tag is "/"
   - the destination can include a folder hierachy that is created on the fligth
   - allows to add a folder with or without a description
   - allows to change the description of an existing folder

  Error cases:
   1. name is missing or is empty

  Default cases:
   1. Description -> empty description
   2. Destination -> folder is created in the root folder
-->

	<!-- D1 [x]-->
	<folder>
		<destination>B</destination>
		<name>C</name>
	</folder>
	<folder>
		<destination>B</destination>
		<name>D</name>
		<description></description>
	</folder>
	<!-- D2 [x]-->
	<folder>
		<name>D</name>
		<description>Folder Description</description>
	</folder>
	<folder>
		<name>E</name>
		<description>Folder Description</description>
	</folder>
	<!-- D3 [x]-->
	<folder>
		<name>F</name>
	</folder>
	<folder>
		<name>G</name>
		<description></description>
		<destination></destination>
	</folder>

	<!-- E1 [x]-->
	<folder>
		<destination>B</destination>
	</folder>
	<folder>
		<name></name>
		<destination>B</destination>
	</folder>

<!-- (4) Folder with source
     Information:
      - the path seperator for the destination tag is "/"
      - the destination can include a folder hierachy that is created on the flight
      - allows to show folder content at another location
      - folder content can be copied to the new location (copy="True") or simply linked to the new location

     Error cases:
      1. name is missing or is empty
      2. new folder is equal to the source folder
      3. sourceName with no corresponding folder
      4. sourceName is empty or missing

     Default cases:
      1. Description -> empty description
      2. Destination -> folder is created in the root folder
      3. Copy attribute -> copy="False"
-->
	<!-- D1 []-->
	<folder sourceName="Ist/Name/dieser" copy="false">
		<destination>A</destination>
		<name>Z</name>
	</folder>
	<folder sourceName="Ist/Name/dieser" copy="false">
		<destination>A</destination>
		<name>Y</name>
		<description></description>
	</folder>
	<!-- D2 []-->
	<folder sourceName="Ist/Name/dieser" copy="false">
		<name>Z</name>
		<description>New mapping folder</description>
	</folder>
	<folder sourceName="Ist/Name/dieser" copy="false">
		<name>Y</name>
		<description>New mapping folder</description>
		<destination></destination>
	</folder>
	<!-- D3 []-->
	<folder sourceName="Ist/Name/dieser">
		<name>Y</name>
		<description>New mapping folder</description>
		<destination>Z</destination>
	</folder>
	<folder sourceName="Ist/Name/dieser" copy="">
		<name>Y</name>
		<description>New mapping folder</description>
		<destination>X</destination>
	</folder>
	<!-- D1, D2, D3 []-->
	<folder sourceName="Ist/Name/dieser">
		<name>YY</name>
	</folder>
	<folder sourceName="Ist/Name/dieser" copy="">
		<name>ZZ</name>
		<description></description>
		<destination></destination>
	</folder>


	<!--- START OF OLD CONFIGURATION PART -->

	<additionalNodes folderName="AdditionalNodesFolder" description="DescriptionOfAdditionalNodes">
		<variable name="BrowseName1" description="myDescription1" value="Wert1" />
		<variable name="BrowseName2" description="myDescription2" value="Wert2" />
		<variable name="BrowseName3" description="myDescription3" value="Wert3" />
		<variable name="BrowseName4" description="myDescription4" value="Wert4" />
		<variable name="BrowseName5" description="myDescription5" value="Wert5" />
	</additionalNodes>
	<additionalNodes folderName="ConfigFolder" description="DescriptionOfConfigFolder">
		<variable name="BrowseNameA" description="myDescriptionA" value="WertA" />
		<variable name="BrowseNameB" description="myDescriptionB" value="WertB" />
	</additionalNodes>

	<application name="WinAA">
		<map sourceVariableName="/Mein/Name_ist#int8Array" rename="Array_s15_int8" engineeringUnit="Test" description="">
			<unrollPath pathSep="_">True</unrollPath>
			<unrollPath pathSep="/">True</unrollPath>
			<unrollPath pathSep="#">True</unrollPath>
		  <folder>NorthSide/LINAC/partA</folder>
			<folder>NorthSide/LINAC/partX</folder>
  	</map>
			<map sourceVariableName="/Mein/Name_ist#int8Array_s15" rename="Array">
			<unrollPath pathSep="_">True</unrollPath>
			<unrollPath pathSep="/">True</unrollPath>
			<unrollPath pathSep="#">True</unrollPath>
		  <folder>NorthSide/LINAC/partA</folder>
			<folder>NorthSide/LINAC/partX</folder>
  	</map>
	</application>
	<application name="WinBB">
		<map sourceVariableName="/Dein/Name//ist/uint8Array_s10" rename="">
			<unrollPath pathSep="/">True</unrollPath>
		  <folder>NorthSideLINAC/partA</folder>
   	</map>
		<map sourceVariableName="/int16Array_s15">
			<unrollPath pathSep="_">False</unrollPath>
		  <folder>SouthSide/LINAC/partA</folder>
			<folder>SouthSide/LINAC/partB</folder>
		</map>
		<map sourceVariableName="/Ist/Name/dieser/int32Scalar">
			<unrollPath pathSep="/">False</unrollPath>
			<folder>EastSide/LINAC</folder>
  	</map>
	</application>
	<application name="WinCC">
		<map sourceVariableName="/Unser/Name/ist_uint8Array_s10">
			<unrollPath pathSep="_">True</unrollPath>
			<unrollPath pathSep="/">True</unrollPath>
		  <folder>SouthSide/LINAC/partA</folder>
    </map>
		<map sourceVariableName="/int16Array_s15">
			<unrollPath pathSep="_">False</unrollPath>
		  <folder>NorthSideLINAC/partB</folder>
    </map>
		<map sourceVariableName="/floatArray_s10" rename="Gustav">
			<unrollPath pathSep="_">False</unrollPath>
   	</map>
	</application>
	<application name="EPICS">
		<map sourceVariableName="/Ist/Name/dieser/uint32Scalar" rename="uint32S">
    </map>
		<map sourceVariableName="/Ist/Name/dieser/int32Scalar">
			<unrollPath pathSep="/">False</unrollPath>
		  <folder>EastSide/LINAC</folder>
    </map>
		<map sourceVariableName="/Ist/Name/dieser/doubleScalar" engineeringUnit="Test" description="updated test desc">
			<unrollPath pathSep="/">True</unrollPath>
		  <folder></folder>
    </map>
	</application>
</uamapping>
