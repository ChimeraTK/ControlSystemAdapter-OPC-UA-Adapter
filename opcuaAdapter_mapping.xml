<?xml version="1.0" encoding="UTF-8" ?>
<uamapping>
	<config rootFolder="llrfCtrl_hzdr" description="Test application for the digital LLRF system at ELBE / HZDR">
		<server applicationName="LLRFServer" port="16660" />
		<login username="test" password="test123" />
		<process_variable_hierarchy>
			<unroll pathSep="/">True</unroll>
		</process_variable_hierarchy>
		<mapping_exceptions>True</mapping_exceptions>
	</config>

    <!-- create folder -->
	<folder>
		<destination>A/B</destination>
		<name>C</name>
		<description>Folder description</description>
	</folder>
	<!-- update folder description of created folder 'B' -->
	<folder>
		<destination>A</destination>
		<name>B</name>
		<description>Description of B</description>
	</folder>
	<!-- update folder description of created folder 'A' -->
	<folder>
		<name>A</name>
		<description>Description of A</description>
	</folder>

	<!-- hierarchical map of complete structure (copy=false)-->
	<folder sourceName="Mein" copy="false">
		<destination>A/B</destination>
	</folder>

	<!-- hierarchical map of complete structure (copy=true)-->
	<folder sourceName="Dein" copy="true">
		<destination>A</destination>
	</folder>

    <!-- Error, copy with false 'option', names not equal -->
    <process_variable sourceName="Dein/Name/ist/uint8Array_s10" copy="false">
        <destination>folderB/folderC</destination>
        <name>varA</name>
        <unit>K</unit>
        <description>newA</description>
    </process_variable>

    <!-- ref in new folder -->
    <process_variable sourceName="Dein/Name/ist/uint8Array_s10" copy="false">
        <destination>folderB/folderC</destination>
        <name>uint8Array_s10</name>
        <unit>K</unit>
        <description>newA</description>
    </process_variable>

    <!-- ref in existing folder -->
	<process_variable sourceName="Dein/Name/ist/uint8Array_s10" copy="false">
		<destination>A/B</destination>
		<name>uint8Array_s10</name>
		<unit>K</unit>
		<description>newA</description>
	</process_variable>

	<!-- update existing pv -->
	<process_variable sourceName="A/B/uint8Array_s10" copy="false">
		<destination>A/B</destination>
		<name>uint8Array_s10</name>
		<unit>F</unit>
		<description>update description</description>
	</process_variable>

	<!-- minimal process var test  TODO adjust, currently is the destination needed
	<process_variable sourceName="A/B/uint8Array_s10" copy="true">
		<name>varB</name>
	</process_variable>
	-->

	<process_variable sourceName="Dein/Name/ist/uint8Array_s10" copy="true">
		<destination>folderB</destination>
		<name>varA</name>
		<unit>K</unit>
		<description>newA</description>
	</process_variable>

<!-- Additional variable section
Information:
- the path seperator for the destination tag is "/"
- the destination can include a folder hierachy that is created on the fligth
- variable type is ctkAdditionalVariable (UAString)
- value should be assigned directly to the additional variable (no subnode named value)

Error cases:
	E1. PV with same name exists
	E2. name is missing or is empty

Default cases:
	D1. Description -> description empty
	D2. Destination -> variable is created in the root folder
	D3. Value -> empty string
-->

	<!-- D1 -->
	<additional_variable>
		<name>av_d1</name>
		<destination>A</destination>
		<value>av_value</value>
	</additional_variable>
	<additional_variable>
		<name>av_d1_1</name>
		<destination>A</destination>
		<description></description>
		<value>av_value</value>
	</additional_variable>
	<!-- D2 -->
	<additional_variable>
		<name>av_d2</name>
		<value>av_value</value>
	</additional_variable>
	<additional_variable>
		<name>av_d2_1</name>
		<destination></destination>
		<value>av_value</value>
	</additional_variable>
	<!-- D3 -->
	<additional_variable>
		<name>av_d3</name>
		<destination>A</destination>
	</additional_variable>
	<additional_variable>
		<name>av_d3_1</name>
		<destination>A</destination>
		<value></value>
	</additional_variable>
	<!-- D1, D2, D3 -->
	<additional_variable>
		<name>av_d4</name>
	</additional_variable>
	<additional_variable>
		<name>av_d4_1</name>
		<destination></destination>
		<description></description>
		<value></value>
	</additional_variable>

	<!-- E1
	<additional_variable>
		<name>av_d4</name>
	</additional_variable>-->
	<!-- E2
	<additional_variable>
		<destination>A</destination>
		<value>av_value</value>
	</additional_variable> -->
	<!-- E2.1
	<additional_variable>
		<name></name>
		<destination>A</destination>
		<value>av_value</value>
	</additional_variable>-->

	<!-- general additional variable test -->
	<additional_variable>
		<destination>A/B</destination>
		<name>test</name>
		<description>New information of AV</description>
		<value>1</value>
	</additional_variable>


<!-- (3) Folder without source
  Information:
   - the path seperator for the destination tag is "/"
   - the destination can include a folder hierachy that is created on the fligth
   - allows to add a folder with or without a description
   - allows to change the description of an existing folder

  Error cases:
   1. name is missing or is empty

  Default cases:
   1. Description -> empty description
   2. Destination -> folder is created in the root folder
-->

	<!-- D1 -->
	<folder>
		<destination>B</destination>
		<name>C</name>
	</folder>
	<folder>
		<destination>B</destination>
		<name>D</name>
		<description></description>
	</folder>
	<!-- D2 -->
	<folder>
		<name>D</name>
		<description>Folder Description</description>
	</folder>
	<folder>
		<name>E</name>
		<description>Folder Description</description>
	</folder>
	<!-- D3 -->
	<folder>
		<name>F</name>
	</folder>
	<folder>
		<name>G</name>
		<description></description>
		<destination></destination>
	</folder>

	<!--- START OF OLD CONFIGURATION PART -->

	<additionalNodes folderName="AdditionalNodesFolder" description="DescriptionOfAdditionalNodes">
		<variable name="BrowseName1" description="myDescription1" value="Wert1" />
		<variable name="BrowseName2" description="myDescription2" value="Wert2" />
		<variable name="BrowseName3" description="myDescription3" value="Wert3" />
		<variable name="BrowseName4" description="myDescription4" value="Wert4" />
		<variable name="BrowseName5" description="myDescription5" value="Wert5" />
	</additionalNodes>
	<additionalNodes folderName="ConfigFolder" description="DescriptionOfConfigFolder">
		<variable name="BrowseNameA" description="myDescriptionA" value="WertA" />
		<variable name="BrowseNameB" description="myDescriptionB" value="WertB" />
	</additionalNodes>

	<application name="WinAA">
		<map sourceVariableName="/Mein/Name_ist#int8Array" rename="Array_s15_int8" engineeringUnit="Test" description="">
			<unrollPath pathSep="_">True</unrollPath>
			<unrollPath pathSep="/">True</unrollPath>
			<unrollPath pathSep="#">True</unrollPath>
		  <folder>NorthSide/LINAC/partA</folder>
			<folder>NorthSide/LINAC/partX</folder>
  	</map>
			<map sourceVariableName="/Mein/Name_ist#int8Array_s15" rename="Array">
			<unrollPath pathSep="_">True</unrollPath>
			<unrollPath pathSep="/">True</unrollPath>
			<unrollPath pathSep="#">True</unrollPath>
		  <folder>NorthSide/LINAC/partA</folder>
			<folder>NorthSide/LINAC/partX</folder>
  	</map>
	</application>
	<application name="WinBB">
		<map sourceVariableName="/Dein/Name//ist/uint8Array_s10" rename="">
			<unrollPath pathSep="/">True</unrollPath>
		  <folder>NorthSideLINAC/partA</folder>
   	</map>
		<map sourceVariableName="/int16Array_s15">
			<unrollPath pathSep="_">False</unrollPath>
		  <folder>SouthSide/LINAC/partA</folder>
			<folder>SouthSide/LINAC/partB</folder>
		</map>
		<map sourceVariableName="/Ist/Name/dieser/int32Scalar">
			<unrollPath pathSep="/">False</unrollPath>
			<folder>EastSide/LINAC</folder>
  	</map>
	</application>
	<application name="WinCC">
		<map sourceVariableName="/Unser/Name/ist_uint8Array_s10">
			<unrollPath pathSep="_">True</unrollPath>
			<unrollPath pathSep="/">True</unrollPath>
		  <folder>SouthSide/LINAC/partA</folder>
    </map>
		<map sourceVariableName="/int16Array_s15">
			<unrollPath pathSep="_">False</unrollPath>
		  <folder>NorthSideLINAC/partB</folder>
    </map>
		<map sourceVariableName="/floatArray_s10" rename="Gustav">
			<unrollPath pathSep="_">False</unrollPath>
   	</map>
	</application>
	<application name="EPICS">
		<map sourceVariableName="/Ist/Name/dieser/uint32Scalar" rename="uint32S">
    </map>
		<map sourceVariableName="/Ist/Name/dieser/int32Scalar">
			<unrollPath pathSep="/">False</unrollPath>
		  <folder>EastSide/LINAC</folder>
    </map>
		<map sourceVariableName="/Ist/Name/dieser/doubleScalar" engineeringUnit="Test" description="updated test desc">
			<unrollPath pathSep="/">True</unrollPath>
		  <folder></folder>
    </map>
	</application>
</uamapping>
